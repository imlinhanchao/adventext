<%- include('header') %>

<form class="form space-y-2" action="/auth/register" method="POST">
  <h1>注册</h1>
  <p>
    <label for="username">用户名:</label>
    <input type="text" id="username" name="username" required value="<%= locals.body?.username || '' -%>">
  </p>
  <p>
    <label for="password">密码:</label>
    <input type="password" id="password" name="password" required value="<%= locals.body?.password || '' -%>">
  </p>
  <p>
    <label for="captcha">验证码:</label>
    <input type="text" maxlength="4" id="captcha" name="captcha" required>
    <img src="/auth/captcha?t=<%= Math.random() -%>" alt="验证码" id="captcha-image">
  </p>
  <button type="submit" class="btn">注册</button>
  <a href="./login" class="link">已有账号？登录</a>
  <% if (locals.message){ -%>
  <p class="<%= type -%> message"><%= message -%></p>
  <% } -%>
</form>

<script>
  document.getElementById('captcha-image').addEventListener('click', function() {
    this.src = '/auth/captcha?t=' + Math.random();
  });
</script>

<%- include('footer') %>