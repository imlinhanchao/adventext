<%- include('header') %>

  <article class="flex flex-1 flex-col h-full max-w-[700px] overflow-hidden">
    <header class="text-center">
      <h2>历史记录</h2>
<% if (ends.length > 0) { %>
      <section class="flex overflow-auto text-lg">
        <span>
          <a <%- endId && endId !== profile.endId && `href="/s/${story.id}/history"` || '' -%>>当前</a>
        </span>
<% ends.forEach(function(end, i) { %>
        <span>/</span>
        <span>
          <a <%- endId !== end.endId && `href="?end=${end.endId}"` || '' -%>><%=end.end-%></a>
        </span>
<% }); %>
      </section>
<% } -%>
    </header>
    <main class="flex-1 overflow-auto">
<% if (list.length > 0) { %>
      <section class="w-full pl-5 h-full overflow-auto space-y-3">
        <p class="text-center"><a href="/s/<%=story.id-%>">继续游玩</a></p>
<% list.forEach(function(record, i) { %>
        <section class="flex flex-col w-full space-y-2 hover:bg-gray-100 dark:hover:bg-gray-800 p-2 rounded-md">
          <span class="line-clamp-2" onclick="open('<%=record.content%>')">
            <%= record.content %>
          </span>
          <span class="flex justify-between items-bottom w-full">
            <span><span class="option-btn text-sm" title="你的选择"><%=record.option-%></span></span>
            <span class="text-gray-500 text-sm"><script>document.write(new Date(<%=Number(record.time)-%>).toLocaleString())</script></span>
          </span>
        </section>
<% }); %>
<% } else { -%>
        <section class="flex h-full items-center justify-center flex-col">
          <p class="text-center">你还没做出选择。</p>
          <p><a href="/s/<%=story.id-%>">继续游玩</a></p>
        </section>
<% } -%>
      </section>
    </main>
  </article>

<%- include('footer') %>